# é£Ÿè­œæ•´åˆèˆ‡æŸ¥è©¢è³‡æ–™åº«ç³»çµ±

# æ‡‰ç”¨æƒ…å¢ƒèˆ‡ä½¿ç”¨æ¡ˆä¾‹
***æ‡‰ç”¨æƒ…å¢ƒ**  
1.ä¸çŸ¥é“å¦‚ä½•è™•ç†å‰©é¤˜é£Ÿæ   
è¨±å¤šäººåœ¨å®¶ä¸­æœ‰å¤šç¨®å‰©é¤˜é£Ÿæï¼Œå»ä¸ç¢ºå®šå¦‚ä½•æ­é…ä¾†è£½ä½œé¤é»ã€‚ç³»çµ±å¯ä»¥æ ¹æ“šç¾æœ‰çš„é£Ÿæè‡ªå‹•æ¨è–¦åˆé©çš„é£Ÿè­œï¼Œè§£æ±ºé£Ÿææµªè²»çš„å•é¡Œã€‚   
2.æ™‚é–“æœ‰é™ï¼Œä¸çŸ¥é“åšä»€éº¼èœ   
å¿™ç¢Œçš„ç”Ÿæ´»è®“è¨±å¤šäººæ²’æœ‰æ™‚é–“å»è¨ˆåŠƒé¤é»ï¼Œå°¤å…¶æ˜¯ä¸‹ç­å¾Œç²¾ç–²åŠ›ç›¡æ™‚ã€‚ç³»çµ±èƒ½å¿«é€Ÿæä¾›å¤šç¨®é¤é»é¸æ“‡ï¼Œçœå»æ€è€ƒè¦åšä»€éº¼çš„ç…©æƒ±ï¼Œæå‡æ•ˆç‡ã€‚   
3.ä¸ç†Ÿæ‚‰é£Ÿææˆ–å»šè—æŠ€å·§   
æœ‰äº›äººå¯èƒ½å°æŸäº›é£Ÿæä¸ç†Ÿæ‚‰ï¼Œæˆ–è€…ä¸çŸ¥é“è©²å¦‚ä½•çƒ¹èª¿ã€‚é€éç³»çµ±çš„é£Ÿè­œæ¨è–¦èˆ‡è©³ç´°çš„è£½ä½œæ­¥é©Ÿï¼Œä½¿ç”¨è€…å¯ä»¥å­¸ç¿’å¦‚ä½•ä½¿ç”¨ä¸åŒçš„é£Ÿæä¾†çƒ¹é£ªå‡ºç¾å‘³çš„é¤é»ã€‚   


***ä½¿ç”¨æ¡ˆä¾‹**  
ä½¿ç”¨è€…ï¼šå¿™ç¢Œçš„ä¸Šç­æ—  
éœ€æ±‚ï¼šå·¥ä½œç¹å¿™ï¼Œæ²’æœ‰æ™‚é–“è¨ˆåŠƒé¤é»ï¼Œå»åˆå¸Œæœ›èƒ½åœ¨å®¶åƒå¾—å¥åº·    
è§£æ±ºæ–¹æ¡ˆï¼š  
æ ¹æ“šä½¿ç”¨è€…è¼¸å…¥é£Ÿæï¼ˆå¦‚é«˜éº—èœã€ä¸åƒè±¬ç‰›ï¼‰ã€‚  
ç³»çµ±è¿…é€Ÿæ¨è–¦é£Ÿè­œï¼Œç¯€çœä½¿ç”¨è€…æ™‚é–“ã€‚  
  
ä½¿ç”¨è€…ï¼šçƒ¹é£ªæ–°æ‰‹  
éœ€æ±‚ï¼šå»šè—ç¶“é©—ä¸è¶³ï¼Œä¸ç†Ÿæ‚‰è£½ä½œéç¨‹èˆ‡é£Ÿæä½¿ç”¨æ¯”ä¾‹ç­‰ã€‚    
è§£æ±ºæ–¹æ¡ˆï¼š  
æ ¹æ“šä½¿ç”¨è€…è¼¸å…¥æ‰€éœ€çš„é£Ÿæã€‚  
ç³»çµ±è¿…é€Ÿæ¨è–¦é£Ÿè­œï¼Œä¸¦æä¾›è©³ç´°çš„é£Ÿè­œè£½ä½œéç¨‹ã€‚  

# çµ„å“¡
41143247  è‘‰ç´˜æ„·  
41143251  è”¡æ²…æ°  
41143256  é»ä¸å®¶  
41143268  è¨±è±ªä¸­

# ç³»çµ±éœ€æ±‚èªªæ˜  
å‰ç«¯ä»‹é¢ï¼šLINE Botâ€‹  
å¾Œç«¯é–‹ç™¼ï¼šFlask / Python  
è³‡æ–™åº«ç³»çµ±ï¼šMariaDB  

# å®Œæ•´æ€§é™åˆ¶
![é£Ÿè­œè³‡æ–™è¡¨](https://github.com/user-attachments/assets/38f2c7fe-3705-41ea-b03b-f6bb7bbac7a4)
![ä½¿ç”¨è€…è³‡æ–™è¡¨](https://github.com/user-attachments/assets/a9d35ad9-666f-497f-bd5b-52fbe733484e)
![ä½¿ç”¨è€…æŒæœ‰é£Ÿæ](https://github.com/user-attachments/assets/66e01658-aace-4215-9def-256a1341ab38)
![é£Ÿè­œæ¨è–¦çµæœ](https://github.com/user-attachments/assets/5f6f98be-8d65-4d67-b35b-9d807eafb670)

# ER Diagram
![image](https://github.com/user-attachments/assets/73ce79ed-2156-4b2a-bcff-ba7195cc0f08)

***é£Ÿè­œ(Recipe) è³‡æ–™è¡¨å±¬æ€§**   
é£Ÿè­œID(Recipe_ID)   
é£Ÿè­œåç¨±(Recipe_Name)   
é£Ÿè­œæ‰€éœ€é£Ÿæ(Ingredient)   
æ­¥é©Ÿ(Instructions)   
é£Ÿè­œç…§ç‰‡(Recipe_photo_url)   

***ä½¿ç”¨è€…(User) è³‡æ–™è¡¨å±¬æ€§**   
ä½¿ç”¨è€…ID(User_ID)   
LINE ID(LINE_ID)   
ä½¿ç”¨è€…ç‹€æ…‹(User_State)   
ä½¿ç”¨è€…æ¬²æ›´æ”¹é£Ÿæ(Change_id)   
ä½¿ç”¨è€…ä¸Šä¸€æ¬¡è¼¸å…¥é£Ÿæ(User_Last_Ingredients)   
ä½¿ç”¨è€…ä¸Šä¸€æ¬¡æ¨è–¦é£Ÿè­œ(User_Last_recipes)   

***ä½¿ç”¨è€…æŒæœ‰é£Ÿæ(User_Ingredients) è³‡æ–™è¡¨å±¬æ€§**   
ä½¿ç”¨è€…é£ŸæID(User_Ingredients_ID)   
LINE ID(LINE_ID)   
æŒæœ‰é£Ÿæåç¨±(Database_Ingredients)   
æ•¸é‡(Quantity)   


***é£Ÿè­œæ¨è–¦çµæœ(Recipe_recommend) è³‡æ–™è¡¨å±¬æ€§**   
ä½¿ç”¨è€…ID(User_ID)   
ä½¿ç”¨è€…é£ŸæID(User_Ingredients_ID)   
é£Ÿè­œID(Recipe_ID)   

# è©³ç´°èªªæ˜
â€¢ã€ŒRecipeã€èˆ‡ã€ŒRecipe_Recommendã€ä¹‹é–“æœ‰ä¸€å°å¤š(1..n)çš„é—œä¿‚ã€‚   
ä¸€å€‹æ¨è–¦çµæœå¯ä»¥å°æ‡‰åˆ°å¤šå€‹é£Ÿè­œï¼Œä½†ä¸€å€‹é£Ÿè­œåªèƒ½å°æ‡‰åˆ°ä¸€å€‹æ¨è–¦çµæœã€‚   
â€¢ã€ŒUserã€èˆ‡ã€ŒRecipe_Recommendã€ä¹‹é–“æœ‰ä¸€å°å¤š(1..n)çš„é—œä¿‚ã€‚   
ä¸€å€‹æ¨è–¦çµæœåªæœƒå°æ‡‰åˆ°ä¸€å€‹ä½¿ç”¨è€…ï¼Œä½†ä¸€å€‹ä½¿ç”¨è€…å¯ä»¥æœ‰å¾ˆå¤šæ¨è–¦çµæœã€‚   
â€¢ã€ŒUser_Ingredientsã€èˆ‡ã€ŒRecipe_Recommendã€ä¹‹é–“æœ‰ä¸€å°å¤š(1..n)çš„é—œä¿‚ã€‚   
ä¸€å€‹æ¨è–¦çµæœæœƒå°æ‡‰åˆ°å¤šå€‹ä½¿ç”¨è€…é£Ÿæï¼Œè€Œæ¯å€‹ä½¿ç”¨è€…é£Ÿæå¿…é ˆå°æ‡‰åˆ°ä¸€å€‹æ¨è–¦çµæœã€‚   

# é£Ÿè­œç®¡ç†ç³»çµ±è³‡æ–™åº«çµæ§‹æ–‡ä»¶
> Author: @ken930805
> 
> Last Updated: 2025-05-05 16:52:00 UTC

## ğŸ“‹ ç›®éŒ„
- [è³‡æ–™è¡¨æ¦‚è¦½](#è³‡æ–™è¡¨æ¦‚è¦½)
- [è©³ç´°è³‡æ–™è¡¨çµæ§‹](#è©³ç´°è³‡æ–™è¡¨çµæ§‹)
  - [Recipe (é£Ÿè­œè³‡æ–™è¡¨)](#1-recipe-é£Ÿè­œè³‡æ–™è¡¨)
  - [User (ä½¿ç”¨è€…è³‡æ–™è¡¨)](#2-user-ä½¿ç”¨è€…è³‡æ–™è¡¨)
  - [User_Ingredients (ä½¿ç”¨è€…æŒæœ‰é£Ÿæè³‡æ–™è¡¨)](#3-user_ingredients-ä½¿ç”¨è€…æŒæœ‰é£Ÿæè³‡æ–™è¡¨)
  - [Recipe_recommend (é£Ÿè­œæ¨è–¦çµæœè³‡æ–™è¡¨)](#4-recipe_recommend-é£Ÿè­œæ¨è–¦çµæœè³‡æ–™è¡¨)
- [ä½¿ç”¨ç¯„ä¾‹](#ä½¿ç”¨ç¯„ä¾‹)

## è³‡æ–™è¡¨æ¦‚è¦½
æœ¬ç³»çµ±åŒ…å«å››å€‹ä¸»è¦è³‡æ–™è¡¨ï¼Œç”¨æ–¼ç®¡ç†é£Ÿè­œæ¨è–¦ç³»çµ±ï¼š
- Recipeï¼šå„²å­˜é£Ÿè­œåŸºæœ¬è³‡è¨Š
- Userï¼šç®¡ç†ä½¿ç”¨è€…è³‡æ–™
- User_Ingredientsï¼šè¿½è¹¤ä½¿ç”¨è€…æ“æœ‰çš„é£Ÿæ
- Recipe_recommendï¼šè¨˜éŒ„æ¨è–¦çµæœ

## è©³ç´°è³‡æ–™è¡¨çµæ§‹

### 1. Recipe (é£Ÿè­œè³‡æ–™è¡¨)

```sql
CREATE TABLE Recipe (
    Recipe_ID INT PRIMARY KEY AUTO_INCREMENT,
    Recipe_Name VARCHAR(100) NOT NULL,
    Ingredient TEXT NOT NULL,
    Instructions TEXT NOT NULL,
    Recipe_photo_url VARCHAR(255)
);
```

#### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| Recipe_ID | INT | é£Ÿè­œå”¯ä¸€è­˜åˆ¥ç¢¼ | ä¸»éµï¼Œè‡ªå‹•éå¢ |
| Recipe_Name | VARCHAR(100) | é£Ÿè­œåç¨± | ä¸å¯ç‚ºç©º |
| Ingredient | TEXT | æ‰€éœ€é£Ÿææ¸…å–® | ä¸å¯ç‚ºç©º |
| Instructions | TEXT | çƒ¹é£ªæ­¥é©Ÿèªªæ˜ | ä¸å¯ç‚ºç©º |
| Recipe_photo_url | VARCHAR(255) | é£Ÿè­œç…§ç‰‡URL | å¯ç‚ºç©º |

### 2. User (ä½¿ç”¨è€…è³‡æ–™è¡¨)

```sql
CREATE TABLE User (
    User_ID INT PRIMARY KEY AUTO_INCREMENT,
    LINE_ID VARCHAR(50) NOT NULL UNIQUE,
    User_State VARCHAR(20) DEFAULT 'active',
    Change_id INT,
    User_Last_Ingredients TEXT,
    User_Last_recipes TEXT
);
```

#### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| User_ID | INT | ä½¿ç”¨è€…å”¯ä¸€è­˜åˆ¥ç¢¼ | ä¸»éµï¼Œè‡ªå‹•éå¢ |
| LINE_ID | VARCHAR(50) | LINEå¹³å°ä½¿ç”¨è€…ID | ä¸å¯é‡è¤‡ |
| User_State | VARCHAR(20) | ä½¿ç”¨è€…ç‹€æ…‹ | é è¨­å€¼ï¼š'active' |
| Change_id | INT | æ¬²æ›´æ”¹é£ŸæID | å¯ç‚ºç©º |
| User_Last_Ingredients | TEXT | ä¸Šæ¬¡è¼¸å…¥é£Ÿæ | å¯ç‚ºç©º |
| User_Last_recipes | TEXT | ä¸Šæ¬¡æ¨è–¦é£Ÿè­œ | å¯ç‚ºç©º |

### 3. User_Ingredients (ä½¿ç”¨è€…æŒæœ‰é£Ÿæè³‡æ–™è¡¨)

```sql
CREATE TABLE User_Ingredients (
    User_Ingredients_ID INT PRIMARY KEY AUTO_INCREMENT,
    LINE_ID VARCHAR(50) NOT NULL,
    Database_Ingredients VARCHAR(100) NOT NULL,
    Quantity INT DEFAULT 1,
    FOREIGN KEY (LINE_ID) REFERENCES User(LINE_ID)
);
```

#### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| User_Ingredients_ID | INT | é£Ÿæè¨˜éŒ„è­˜åˆ¥ç¢¼ | ä¸»éµï¼Œè‡ªå‹•éå¢ |
| LINE_ID | VARCHAR(50) | ä½¿ç”¨è€…LINE ID | å¤–éµåƒç…§Userè¡¨ |
| Database_Ingredients | VARCHAR(100) | é£Ÿæåç¨± | ä¸å¯ç‚ºç©º |
| Quantity | INT | æ•¸é‡ | é è¨­å€¼ï¼š1 |

### 4. Recipe_recommend (é£Ÿè­œæ¨è–¦çµæœè³‡æ–™è¡¨)

```sql
CREATE TABLE Recipe_recommend (
    User_ID INT NOT NULL,
    User_Ingredients_ID INT NOT NULL,
    Recipe_ID INT NOT NULL,
    PRIMARY KEY (User_ID, User_Ingredients_ID, Recipe_ID),
    FOREIGN KEY (User_ID) REFERENCES User(User_ID),
    FOREIGN KEY (User_Ingredients_ID) REFERENCES User_Ingredients(User_Ingredients_ID),
    FOREIGN KEY (Recipe_ID) REFERENCES Recipe(Recipe_ID)
);
```

#### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| User_ID | INT | ä½¿ç”¨è€…ID | è¤‡åˆä¸»éµä¹‹ä¸€ |
| User_Ingredients_ID | INT | ä½¿ç”¨è€…é£ŸæID | è¤‡åˆä¸»éµä¹‹ä¸€ |
| Recipe_ID | INT | é£Ÿè­œID | è¤‡åˆä¸»éµä¹‹ä¸€ |

## ä½¿ç”¨ç¯„ä¾‹

### æŸ¥è©¢ä½¿ç”¨è€…é£Ÿæ
```sql
SELECT ui.Database_Ingredients, ui.Quantity
FROM User_Ingredients ui
JOIN User u ON ui.LINE_ID = u.LINE_ID
WHERE u.LINE_ID = 'U123456789';
```

### æŸ¥è©¢æ¨è–¦é£Ÿè­œ
```sql
SELECT r.Recipe_Name, r.Ingredient, r.Instructions
FROM Recipe_recommend rr
JOIN Recipe r ON rr.Recipe_ID = r.Recipe_ID
WHERE rr.User_ID = 1;
```

### æ ¹æ“šé£ŸææŸ¥æ‰¾é£Ÿè­œ
```sql
SELECT DISTINCT r.*
FROM Recipe r
JOIN Recipe_recommend rr ON r.Recipe_ID = rr.Recipe_ID
JOIN User_Ingredients ui ON rr.User_Ingredients_ID = ui.User_Ingredients_ID
WHERE ui.Database_Ingredients IN ('ç•ªèŒ„', 'é›è›‹');
```

## æ³¨æ„äº‹é …
1. æ‰€æœ‰å¤–éµé—œä¿‚éœ€ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§
2. å»ºè­°å®šæœŸå‚™ä»½è³‡æ–™åº«
3. è€ƒæ…®ç‚ºå¸¸ç”¨æŸ¥è©¢å»ºç«‹ç´¢å¼•æå‡æ•ˆèƒ½

## æœªä¾†å„ªåŒ–æ–¹å‘
- [ ] æ·»åŠ é£Ÿæä¿å­˜æœŸé™æ¬„ä½
- [ ] å»ºç«‹é£Ÿè­œåˆ†é¡ç³»çµ±
- [ ] å¯¦ä½œä½¿ç”¨è€…è©•åˆ†åŠŸèƒ½
- [ ] å„ªåŒ–æ¨è–¦æ¼”ç®—æ³•

---
*æ­¤æ–‡ä»¶æœ€å¾Œæ›´æ–°æ–¼ 2025-05-05 16:52:00 UTC by @ken930805*
