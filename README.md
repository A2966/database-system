# é£Ÿè­œæŸ¥è©¢è³‡æ–™åº«ç³»çµ±
ä½¿ç”¨è€…è¼¸å…¥ä»–æ‰€æŒæœ‰çš„é£Ÿæï¼Œç³»çµ±æœƒä¾ç…§ä½¿ç”¨è€…æ‰€æä¾›çš„é£Ÿæï¼Œé€²è¡Œæœ€ä½³çš„é£Ÿè­œæ¨è–¦ã€‚
## ğŸ“‹ ç›®éŒ„
- [çµ„å“¡è³‡è¨Š](#çµ„å“¡è³‡è¨Š)
- [æ‡‰ç”¨æƒ…å¢ƒèˆ‡ä½¿ç”¨æ¡ˆä¾‹](#æ‡‰ç”¨æƒ…å¢ƒèˆ‡ä½¿ç”¨æ¡ˆä¾‹)
- [ç³»çµ±æ¶æ§‹](#ç³»çµ±æ¶æ§‹)
- [è³‡æ–™åº«çµæ§‹](#è³‡æ–™åº«çµæ§‹)
- [View](#View)
- [è©³ç´°èªªæ˜](#è©³ç´°èªªæ˜)
- [è³‡æ–™åº«Schema](#è³‡æ–™åº«Schema)

## çµ„å“¡è³‡è¨Š

| å­¸è™Ÿ | å§“å | åˆ†å·¥ |
|------|------|------|
| 41143247 | è‘‰ç´˜æ„· | è³‡æ–™åº«æ¶æ§‹ |
| 41143251 | è”¡æ²…æ° | è³‡æ–™çˆ¬èŸ² |
| 41143256 | é»ä¸å®¶ | LINE botã€é£Ÿè­œæŸ¥è©¢ |
| 41143268 | è¨±è±ªä¸­ | ç®¡ç†é£Ÿè­œç¶²ç«™ |

## æ‡‰ç”¨æƒ…å¢ƒèˆ‡ä½¿ç”¨æ¡ˆä¾‹

### ğŸ¯ æ‡‰ç”¨æƒ…å¢ƒ

#### 1. åˆ©ç”¨å‰©é¤˜é£Ÿæçµ„åˆå‡ºå…¶ä»–é£Ÿè­œ
è¨±å¤šäººåœ¨å®¶ä¸­æœ‰å¤šç¨®å‰©é¤˜é£Ÿæï¼Œå»ä¸ç¢ºå®šå¦‚ä½•æ­é…ä¾†è£½ä½œé¤é»ã€‚ç³»çµ±å¯ä»¥æ ¹æ“šé£Ÿæè‡ªå‹•æ¨è–¦åˆé©çš„é£Ÿè­œï¼Œä¸¦å‘Šè¨´ä½ éœ€è¦å“ªäº›é£Ÿæä¾†è£œé½Šï¼Œè®“ä½ å–„ç”¨å‰©é¤˜é£Ÿæï¼Œè§£æ±ºé£Ÿææµªè²»çš„åŒæ™‚æ¢ç´¢å…¨æ–°çš„é£Ÿææ–™ç†æ–¹å¼ã€‚

#### 2. æ™‚é–“æœ‰é™ï¼Œä¸çŸ¥é“åšä»€éº¼èœ
å¿™ç¢Œçš„ç”Ÿæ´»è®“è¨±å¤šäººæ²’æœ‰æ™‚é–“å»è¨ˆåŠƒé¤é»ï¼Œå°¤å…¶æ˜¯ä¸‹ç­å¾Œç²¾ç–²åŠ›ç›¡æ™‚ã€‚ç³»çµ±èƒ½å¿«é€Ÿæä¾›å¤šç¨®é¤é»é¸æ“‡ï¼Œçœå»æ€è€ƒè¦åšä»€éº¼çš„ç…©æƒ±ï¼Œæå‡æ•ˆç‡ã€‚

#### 3. ä¸ç†Ÿæ‚‰é£Ÿææˆ–å»šè—æŠ€å·§
æœ‰äº›äººå¯èƒ½å°æŸäº›é£Ÿæä¸ç†Ÿæ‚‰ï¼Œæˆ–è€…ä¸çŸ¥é“è©²å¦‚ä½•çƒ¹èª¿ã€‚é€éç³»çµ±çš„é£Ÿè­œæ¨è–¦èˆ‡è©³ç´°çš„è£½ä½œæ­¥é©Ÿï¼Œä½¿ç”¨è€…å¯ä»¥å­¸ç¿’å¦‚ä½•ä½¿ç”¨ä¸åŒçš„é£Ÿæä¾†çƒ¹é£ªå‡ºç¾å‘³çš„é¤é»ã€‚

###  ä½¿ç”¨æ¡ˆä¾‹

![ä½¿ç”¨æ¡ˆä¾‹åœ–](https://github.com/user-attachments/assets/fadfac63-4f0d-4336-acd9-d179ea0bdf11)

![ä½¿ç”¨æ¡ˆä¾‹åœ–](https://github.com/user-attachments/assets/00b1ba91-4c1b-4a1f-a8e3-e95101446aa7)

![ä½¿ç”¨æ¡ˆä¾‹åœ–](https://github.com/user-attachments/assets/93fe2b90-f2a1-4f9c-9f5f-845aa593d8dd)

- ä½¿ç”¨è€…
  - è¼¸å…¥é£Ÿæ
  - æ›´æ”¹é£Ÿæ
  - æ¨è–¦é£Ÿè­œ
  - è¨­å®šå­æƒ¡é£Ÿæ
- èªªæ˜
  - ä½¿ç”¨è€…å¯ä»¥è¼¸å…¥æƒ³è¦çš„é£Ÿæï¼Œå°æ‡‰ã€ŒUser_Ingredients(ä½¿ç”¨è€…æŒæœ‰é£Ÿæè¡¨)ã€ã€‚
  - ä½¿ç”¨è€…è¼¸å…¥éŒ¯èª¤æ™‚å¯ä»¥æ›´æ”¹æ‰€éœ€çš„é£Ÿæã€‚
  - ç•¶ä½¿ç”¨è€…ç¢ºèªæ‰€éœ€å…¨éƒ¨é£Ÿææ™‚ï¼Œæ¨è–¦å‡ºæœ€ç›¸é—œé£Ÿè­œã€‚
  - ä½¿ç”¨è€…å¯ä»¥è‡ªè¡Œè¨­å®šè¨å­çš„é£Ÿæï¼Œé¿å…å‡ºç¾åœ¨é£Ÿè­œä¸Šé¢ã€‚å°æ‡‰ã€ŒUser(ä½¿ç”¨è€…è¡¨)ã€ã€‚

- ç®¡ç†è€…
  - æ–°å¢é£Ÿè­œ
  - ä¿®æ”¹é£Ÿè­œ
    
- èªªæ˜
  - ç®¡ç†è€…å¯ä»¥æ–°å¢æ–°çš„é£Ÿè­œã€‚
  - ç®¡ç†è€…å¯ä»¥ä¿®æ”¹ç¾æœ‰çš„é£Ÿè­œã€‚

## ç³»çµ±éœ€æ±‚èªªæ˜

### æ–°å¢é£Ÿæ
- å…è¨±ä½¿ç”¨è€…è¼¸å…¥é£Ÿæ  
- è¨˜éŒ„ä½¿ç”¨è€…ç•¶å‰è¼¸å…¥çš„é£Ÿæ  

### æ›´æ”¹é£Ÿæ
- æ”¯æ´ä½¿ç”¨è€…é¸æ“‡ä¸¦æ›´æ”¹é£Ÿæç·¨è™Ÿ  

### ä½¿ç”¨è€…åå¥½
- å…è¨±ä½¿ç”¨è€…è¼¸å…¥ä¸å–œæ­¡çš„é£Ÿæ  
- æ ¹æ“šä½¿ç”¨è€…åå¥½èª¿æ•´æ¨è–¦çµæœ  

### æ¨è–¦é£Ÿè­œ
- æ ¹æ“šä½¿ç”¨è€…ç›®å‰æ“æœ‰çš„é£Ÿæï¼Œæ¨è–¦ç›¸ç¬¦çš„é£Ÿè­œ  

## ç³»çµ±æ¶æ§‹

### æŠ€è¡“å †ç–Š
- å‰ç«¯ä»‹é¢ï¼šLINE Bot
- å¾Œç«¯é–‹ç™¼ï¼šFlask / Python
- è³‡æ–™åº«ç³»çµ±ï¼šphpMyAdmin

# è³‡æ–™åº«çµæ§‹èˆ‡å®Œæ•´æ€§é™åˆ¶

## å®Œæ•´æ€§é™åˆ¶

### ğŸ“‹ Recipe è³‡æ–™è¡¨

#### åŸºæœ¬æ¬„ä½

| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | æ˜¯å¦å¯ç‚ºç©º | æ¬„ä½èªªæ˜ | å€¼åŸŸ/é™åˆ¶ | å¯¦éš›è³‡æ–™èˆ‰ä¾‹ |
|---------|----------|------------|----------|------------|-------------|
| Recipe_ID | INT | å¦ | é£Ÿè­œç·¨è™Ÿï¼ˆä¸»éµï¼‰ | è‡ªå‹•ç·¨è™Ÿï¼Œå”¯ä¸€ | 101 |
| Recipe_Name | VARCHAR(100) | å¦ | é£Ÿè­œåç¨± | ä»»æ„åç¨± | ç¾…å®‹æ¹¯ |
| Ingredient | TEXT | å¦ | ä½¿ç”¨é£Ÿæåˆ—è¡¨ | ä»¥æ–‡å­—æè¿°æ‰€éœ€é£Ÿæï¼Œä»¥,åˆ†éš” | ç•ªèŒ„,é¦¬éˆ´è–¯ |
| Instructions | TEXT | æ˜¯ | é£Ÿè­œæ­¥é©Ÿèªªæ˜ | ä»»æ„æ–‡å­— | åŠé¡†çš„æ´‹è”¥åˆ‡ä¸ã€ç´…è˜¿è””ã€é¦¬ç²è–¯åˆ‡ä¸... |
| Recipe_url | TEXT | æ˜¯ | è©³ç´°é£Ÿè­œé€£çµ | åˆæ³• URL | https://example.com/recipe |
| Recipe_photo_url | TEXT | æ˜¯ | é£Ÿè­œåœ–ç‰‡ç¶²å€ | åˆæ³•åœ–ç‰‡ URL | https://imgur.com/pasta.jpg |

#### å®Œæ•´æ€§é™åˆ¶èªªæ˜

| æ¬„ä½åç¨± | å€¼åŸŸé™åˆ¶èªªæ˜ | ç¢ºèªæ–¹å¼ï¼ˆMySQLï¼‰ |
|---------|-------------|-----------------|
| Recipe_ID | å¿…é ˆç‚ºå¤§æ–¼ 0 çš„æ•´æ•¸ï¼Œä¸”ä¸å¯ç‚ºç©ºï¼Œä½œç‚ºä¸»éµéœ€ä¿è­‰å”¯ä¸€æ€§ | ä½¿ç”¨ AUTO_INCREMENT ç¢ºä¿éå¢ä¸”å”¯ä¸€ |
| Recipe_Name | å¿…é ˆç‚ºé•·åº¦ 1 åˆ° 100 å€‹å­—å…ƒçš„æ–‡å­—ï¼Œä¸å¯ç‚ºç©º | CHECK (CHAR_LENGTH(Recipe_Name) BETWEEN 1 AND 100) |
| Ingredient | å¿…é ˆåŒ…å«è‡³å°‘ä¸€é …é£Ÿæï¼Œä¸å¯ç‚ºç©º | CHECK (CHAR_LENGTH(Ingredient) > 0) |
| Instructions | å¯ç‚ºç©ºï¼Œè‹¥ä¸ç‚ºç©ºå‰‡å¿…é ˆåŒ…å«æ–‡å­—èªªæ˜ | ç„¡éœ€é¡å¤–é™åˆ¶ |
| Recipe_url | å¯ç‚ºç©ºï¼Œè‹¥ä¸ç‚ºç©ºå‰‡å¿…é ˆæ˜¯åˆæ³•çš„ URL æ ¼å¼ | CHECK (Recipe_url IS NULL OR Recipe_url REGEXP '^https?://[A-Za-z0-9\\-\\._~:/\\?#\\[\\]@!\\$&\'\\(\\)\\*\\+,;=]+$') |
| Recipe_photo_url | å¯ç‚ºç©ºï¼Œè‹¥ä¸ç‚ºç©ºå‰‡å¿…é ˆæ˜¯åˆæ³•çš„åœ–ç‰‡ URL æ ¼å¼ | CHECK (Recipe_photo_url IS NULL OR Recipe_photo_url REGEXP '^https?://.*\\.(jpg\|jpeg\|png\|gif)$') |

```sql
CREATE TABLE Recipe (
    Recipe_ID INT PRIMARY KEY AUTO_INCREMENT,
    Recipe_Name VARCHAR(100) NOT NULL,
    Ingredient TEXT NOT NULL,
    Instructions TEXT,
    Recipe_url TEXT,
    Recipe_photo_url TEXT,
    CHECK (CHAR_LENGTH(Recipe_Name) BETWEEN 1 AND 100),
    CHECK (CHAR_LENGTH(Ingredient) > 0),
    CHECK (Recipe_url IS NULL OR Recipe_url REGEXP '^https?://[A-Za-z0-9\\-\\._~:/\\?#\\[\\]@!\\$&\'\\(\\)\\*\\+,;=]+$'),
    CHECK (Recipe_photo_url IS NULL OR Recipe_photo_url REGEXP '^https?://.*\\.(jpg|jpeg|png|gif)$')
) ENGINE=InnoDB;


-- ç¯„ä¾‹ï¼šæ’å…¥ä¸€ç­†é£Ÿè­œè³‡æ–™åˆ° Recipe è¡¨
INSERT INTO Recipe (Recipe_Name, Ingredient, Instructions, Recipe_url, Recipe_photo_url)
VALUES (
    'ç‚’è›‹',                                      -- Recipe_Nameï¼šé£Ÿè­œåç¨±
    'é›è›‹, é¹½, æ²¹',                                  -- Ingredientï¼šé£Ÿæåˆ—è¡¨
    'å°‡é›è›‹æ‰“æ•£ï¼ŒåŠ é¹½å¾Œä¸‹æ²¹é‹ç¿»ç‚’è‡³ç†Ÿã€‚',              -- Instructionsï¼šæ–™ç†æ­¥é©Ÿèªªæ˜
    'https://example.com/recipe/eggs',               -- Recipe_urlï¼šé£Ÿè­œè©³ç´°èªªæ˜ç¶²é é€£çµï¼ˆå¯é¸ï¼‰
    'https://example.com/images/eggs.jpg'            -- Recipe_photo_urlï¼šé£Ÿè­œåœ–ç‰‡é€£çµï¼ˆå¯é¸ï¼Œé™åœ–ç‰‡æ ¼å¼ï¼‰
);
```

### ğŸ‘¤ User è³‡æ–™è¡¨

#### åŸºæœ¬æ¬„ä½

| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | æ˜¯å¦å¯ç‚ºç©º | æ¬„ä½èªªæ˜ | å€¼åŸŸ/é™åˆ¶ | å¯¦éš›è³‡æ–™èˆ‰ä¾‹ |
|---------|----------|------------|----------|------------|-------------|
| LINE_ID | VARCHAR(50) | å¦ | ä½¿ç”¨è€…çš„ LINE è­˜åˆ¥ç¢¼ | å”¯ä¸€å€¼ï¼Œä¸»éµ | U49bbc79ed892a8b8357a3699327850da |
| User_State | VARCHAR(20) | æ˜¯ | ä½¿ç”¨è€…ç›®å‰ç‹€æ…‹ | ä»»æ„ç‹€æ…‹æè¿°æ–‡å­— | none |
| user_dislike | TEXT | æ˜¯ | ä½¿ç”¨è€…ä¸å–œæ­¡çš„é£Ÿæ | ä»¥é€—è™Ÿåˆ†éš”çš„é£Ÿæåç¨± | æ´‹è”¥,é’æ¤’ |

#### å®Œæ•´æ€§é™åˆ¶èªªæ˜

| æ¬„ä½åç¨± | å€¼åŸŸé™åˆ¶èªªæ˜ | ç¢ºèªæ–¹å¼ï¼ˆMySQLï¼‰ |
|---------|-------------|-----------------|
| LINE_ID | å¿…é ˆç‚ºLINEæä¾›çš„æœ‰æ•ˆä½¿ç”¨è€…è­˜åˆ¥ç¢¼ï¼Œé•·åº¦å›ºå®šï¼Œä¸”ä¸å¯ç‚ºç©º | CHECK (LINE_ID REGEXP '^U[a-f0-9]{32}$') |
| User_State | å¯ç‚ºç©ºï¼Œè‹¥ä¸ç‚ºç©ºå‰‡é•·åº¦ä¸å¾—è¶…é20å€‹å­—å…ƒ | CHECK (User_State IS NULL OR CHAR_LENGTH(User_State) <= 20) |
| user_dislike | å¯ç‚ºç©ºï¼Œè‹¥ä¸ç‚ºç©ºå‰‡å¿…é ˆä»¥é€—è™Ÿåˆ†éš”å„å€‹é£Ÿæåç¨± | ç„¡éœ€é¡å¤–é™åˆ¶ |

```sql
CREATE TABLE User (
    LINE_ID VARCHAR(50) PRIMARY KEY,
    User_State VARCHAR(20),
    user_dislike TEXT,
    CHECK (LINE_ID REGEXP '^U[a-f0-9]{32}$'),
    CHECK (User_State IS NULL OR CHAR_LENGTH(User_State) <= 20)
) ENGINE=InnoDB;


--  ç¯„ä¾‹ï¼šæ’å…¥ä¸€ä½ä½¿ç”¨è€…åˆ° User è¡¨
INSERT INTO User (LINE_ID, User_State, user_dislike)
VALUES (
    'U1234567890abcdef1234567890abcdef',             -- LINE_IDï¼šä½¿ç”¨è€…LINEå”¯ä¸€IDï¼Œå›ºå®šæ ¼å¼Ué–‹é ­+32ä½å°å¯«åå…­é€²ä½
    'é¸æ“‡é£Ÿæä¸­',                                     -- User_Stateï¼šç›®å‰ä½¿ç”¨è€…ç‹€æ…‹ï¼ˆå¯ç‚º NULLï¼‰
    'ä¸å–œé¦™èœã€ä¸åƒç‰›è‚‰'                              -- user_dislikeï¼šä½¿ç”¨è€…å¿Œå£å…§å®¹ï¼ˆä¾‹å¦‚éæ•ã€è¨å­é£Ÿç‰©ï¼‰
);
```

### ğŸ¥¬ Ingredient è³‡æ–™è¡¨

#### åŸºæœ¬æ¬„ä½

| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | æ˜¯å¦å¯ç‚ºç©º | æ¬„ä½èªªæ˜ | å€¼åŸŸ/é™åˆ¶ | å¯¦éš›è³‡æ–™èˆ‰ä¾‹ |
|---------|----------|------------|----------|------------|-------------|
| Ingredient_ID | INT | å¦ | é£Ÿæç·¨è™Ÿï¼ˆä¸»éµï¼‰ | å”¯ä¸€ | 1 |
| Ingredient_Name | VARCHAR(50) | å¦ | é£Ÿæåç¨± | ä»»æ„é£Ÿæåç¨± | ç•ªèŒ„ |

#### å®Œæ•´æ€§é™åˆ¶èªªæ˜

| æ¬„ä½åç¨± | å€¼åŸŸé™åˆ¶èªªæ˜ | ç¢ºèªæ–¹å¼ï¼ˆMySQLï¼‰ |
|---------|-------------|-----------------|
| Ingredient_ID | å¿…é ˆç‚ºå¤§æ–¼ 0 çš„æ•´æ•¸ï¼Œä¸”ä¸å¯ç‚ºç©ºï¼Œä½œç‚ºä¸»éµéœ€ä¿è­‰å”¯ä¸€æ€§ | ä½¿ç”¨ AUTO_INCREMENT ç¢ºä¿éå¢ä¸”å”¯ä¸€ |
| Ingredient_Name | å¿…é ˆç‚ºé•·åº¦ 1 åˆ° 50 å€‹å­—å…ƒçš„æ–‡å­—ï¼Œä¸”ä¸å¯ç‚ºç©ºï¼ŒåŒä¸€é£Ÿæåç¨±ä¸å¾—é‡è¤‡ | CHECK (CHAR_LENGTH(Ingredient_Name) BETWEEN 1 AND 50) |

```sql
CREATE TABLE Ingredient (
    Ingredient_ID INT PRIMARY KEY AUTO_INCREMENT,
    Ingredient_Name VARCHAR(50) NOT NULL UNIQUE,
    CHECK (CHAR_LENGTH(Ingredient_Name) BETWEEN 1 AND 50)
);


-- ç¯„ä¾‹ï¼šæ’å…¥ä¸€ç­†é£Ÿæè³‡æ–™åˆ° Ingredient è¡¨
INSERT INTO Ingredient (Ingredient_Name)
VALUES (
    'é›è›‹'                                            -- Ingredient_Nameï¼šå–®ä¸€å€‹é£Ÿæåç¨±ï¼ˆå”¯ä¸€ï¼‰
);
```

### ğŸ¥£ User_Ingredients è³‡æ–™è¡¨

#### åŸºæœ¬æ¬„ä½

| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | æ˜¯å¦å¯ç‚ºç©º | æ¬„ä½èªªæ˜ | å€¼åŸŸ/é™åˆ¶ | å¯¦éš›è³‡æ–™èˆ‰ä¾‹ |
|---------|----------|------------|----------|------------|-------------|
| LINE_ID | VARCHAR(50) | å¦ | ä½¿ç”¨è€…çš„ LINE è­˜åˆ¥ç¢¼ | åƒç…§ User.LINE_ID | U49bbc79ed892a8b8357a3699327850da |
| Ingredients | VARCHAR(50) | å¦ | é£Ÿæåç¨± | ä»»æ„é£Ÿæåç¨± | é¦¬éˆ´è–¯ |
| Quantity | VARCHAR(20) | æ˜¯ | é£Ÿææ•¸é‡ | > 0 çš„æ•´æ•¸ | 2 |

#### å®Œæ•´æ€§é™åˆ¶èªªæ˜

| æ¬„ä½åç¨± | å€¼åŸŸé™åˆ¶èªªæ˜ | ç¢ºèªæ–¹å¼ï¼ˆMySQLï¼‰ |
|---------|-------------|-----------------|
| LINE_ID | å¿…é ˆå­˜åœ¨æ–¼ User è¡¨ä¸­çš„ LINE_IDï¼Œä¸”ä¸å¯ç‚ºç©º | FOREIGN KEY (LINE_ID) REFERENCES User(LINE_ID) |
| Ingredients | å¿…é ˆç‚ºé•·åº¦ 1 åˆ° 50 å€‹å­—å…ƒçš„æ–‡å­—ï¼Œä¸”ä¸å¯ç‚ºç©º | CHECK (CHAR_LENGTH(Ingredients) BETWEEN 1 AND 50) |
| Quantity | å¯ç‚ºç©ºï¼Œè‹¥ä¸ç‚ºç©ºå‰‡å¿…é ˆç‚ºæ­£æ•´æ•¸ | CHECK (Quantity IS NULL OR CAST(Quantity AS SIGNED) > 0) |

```sql
CREATE TABLE User_Ingredients (
    LINE_ID VARCHAR(50) NOT NULL,
    Ingredients VARCHAR(50) NOT NULL,
    Quantity VARCHAR(20),
    FOREIGN KEY (LINE_ID) REFERENCES User(LINE_ID),
    CHECK (CHAR_LENGTH(Ingredients) BETWEEN 1 AND 50),
    CHECK (Quantity IS NULL OR CAST(Quantity AS SIGNED) > 0)
);


-- ç¯„ä¾‹ï¼šæ’å…¥ä¸€ç­†ä½¿ç”¨è€…é£Ÿæè³‡æ–™åˆ° User_Ingredients è¡¨
INSERT INTO User_Ingredients (LINE_ID, Ingredients, Quantity)
VALUES (
    'U1234567890abcdef1234567890abcdef',             -- LINE_IDï¼šé—œè¯ User è¡¨çš„ä½¿ç”¨è€…ID
    'é›è›‹',                                           -- Ingredientsï¼šè©²ä½¿ç”¨è€…æ“æœ‰çš„é£Ÿæåç¨±
    '2'                                               -- Quantityï¼šæ•¸é‡ï¼ˆéœ€ç‚ºæ­£æ•´æ•¸æˆ–å¯ç‚º NULLï¼‰
);
```

### â­ Favorite_recipes è³‡æ–™è¡¨

#### åŸºæœ¬æ¬„ä½

| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | æ˜¯å¦å¯ç‚ºç©º | æ¬„ä½èªªæ˜ | å€¼åŸŸ/é™åˆ¶ | å¯¦éš›è³‡æ–™èˆ‰ä¾‹ |
|---------|----------|------------|----------|------------|-------------|
| LINE_ID | VARCHAR(50) | å¦ | ä½¿ç”¨è€…çš„ LINE è­˜åˆ¥ç¢¼ | åƒç…§ User.LINE_ID | U49bbc79ed892a8b8357a3699327850da |
| Recipe_ID | INT | å¦ | é£Ÿè­œç·¨è™Ÿ | åƒç…§ Recipe.Recipe_ID | 101 |
| Favorite_time | DATETIME | å¦ | åŠ å…¥æœ€æ„›çš„æ™‚é–“ | æ ¼å¼ï¼šYYYY-MM-DD HH:MM:SS | 2025-06-05 15:00:00 |
| Note | TEXT | æ˜¯ | å‚™è¨»èªªæ˜ | ä»»æ„æ–‡å­— |  |

#### å®Œæ•´æ€§é™åˆ¶èªªæ˜

| æ¬„ä½åç¨± | å€¼åŸŸé™åˆ¶èªªæ˜ | ç¢ºèªæ–¹å¼ï¼ˆMySQLï¼‰ |
|---------|-------------|-----------------|
| LINE_ID | å¿…é ˆå­˜åœ¨æ–¼ User è¡¨ä¸­çš„ LINE_IDï¼Œä¸”ä¸å¯ç‚ºç©º | FOREIGN KEY (LINE_ID) REFERENCES User(LINE_ID) |
| Recipe_ID | å¿…é ˆå­˜åœ¨æ–¼ Recipe è¡¨ä¸­çš„ Recipe_IDï¼Œä¸”ä¸å¯ç‚ºç©º | FOREIGN KEY (Recipe_ID) REFERENCES Recipe(Recipe_ID) |
| Favorite_time | å¿…é ˆç‚ºæœ‰æ•ˆçš„æ—¥æœŸæ™‚é–“æ ¼å¼ï¼Œä¸”ä¸å¯ç‚ºç©º | ç„¡éœ€é¡å¤–é™åˆ¶ï¼ˆMySQLå…§å»ºé©—è­‰ï¼‰ |
| Note | å¯ç‚ºç©ºï¼Œè‹¥ä¸ç‚ºç©ºå‰‡å¯åŒ…å«ä»»æ„æ–‡å­— | ç„¡éœ€é¡å¤–é™åˆ¶ |

```sql
CREATE TABLE Favorite_recipes (
    LINE_ID VARCHAR(50) NOT NULL,
    Recipe_ID INT NOT NULL,
    Favorite_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    Note TEXT,
    FOREIGN KEY (LINE_ID) REFERENCES User(LINE_ID),
    FOREIGN KEY (Recipe_ID) REFERENCES Recipe(Recipe_ID),
    PRIMARY KEY (LINE_ID, Recipe_ID)
) ENGINE=InnoDB;


-- ç¯„ä¾‹ï¼šæ’å…¥ä¸€ç­†ä½¿ç”¨è€…æ”¶è—çš„é£Ÿè­œè³‡æ–™åˆ° Favorite_recipes è¡¨
INSERT INTO Favorite_recipes (LINE_ID, Recipe_ID, Note)
VALUES (
    'U1234567890abcdef1234567890abcdef',             -- LINE_IDï¼šé—œè¯ User è¡¨çš„ä½¿ç”¨è€…ID
    1,                                                -- Recipe_IDï¼šé—œè¯ Recipe è¡¨çš„é£Ÿè­œID
    'é€™å€‹ç‚’è›‹çœŸçš„å¾ˆå¥½åƒï¼Œä¸‹æ¬¡åŠ è”¥èŠ±è©¦è©¦'               -- Noteï¼šä½¿ç”¨è€…çµ¦é€™é“èœçš„ç­†è¨˜ï¼ˆå¯ç‚º NULLï¼‰
);
```


---



### ER Diagram
![Chenerdiagram1](https://github.com/user-attachments/assets/3e717033-d061-4bb0-88fe-160e0db90727)



### è³‡æ–™è¡¨çµæ§‹

#### 1. User (ä½¿ç”¨è€…è³‡æ–™è¡¨)
| æ¬„ä½åç¨± | èªªæ˜ |
|----------|------|
| LINE_ID | ä½¿ç”¨è€…LINEçš„ID |
| User_State | ä½¿ç”¨è€…ç‹€æ…‹ |
| User_dislike | ä½¿ç”¨è€…ä¸å–œæ­¡çš„é£Ÿæ |

#### 2. User_Ingredients (ä½¿ç”¨è€…é£Ÿæè³‡æ–™è¡¨)
| æ¬„ä½åç¨± | èªªæ˜ |
|----------|------|
| User_ID | ä½¿ç”¨è€…LINEçš„ID |
| Ingredients | é£Ÿæåç¨± |
| Quantity | é£Ÿææ•¸é‡ |

#### 3. Favorite_recipes (ä½¿ç”¨è€…å–œæ„›é£Ÿè­œè³‡æ–™è¡¨)
| æ¬„ä½åç¨± | èªªæ˜ |
|----------|------|
| LINE_ID | ä½¿ç”¨è€…LINEçš„ID |
| Recipe_ID | é£Ÿè­œçš„ID |
| Favorite_time | æ–°å¢å–œæ„›çš„æ™‚é–“ |
| Note | ä½¿ç”¨è€…å‚™è¨» |

#### 4. Recipe (é£Ÿè­œæ¨è³‡æ–™è¡¨)
| æ¬„ä½åç¨± | èªªæ˜ |
|----------|------|
| Recipe_ID | é£Ÿè­œçš„ç·¨è™Ÿ |
| Recipe_Name | é£Ÿè­œçš„åç¨± |
| Recipe_photo_url | é£Ÿè­œç…§ç‰‡çš„ç¶²å€ |
| Recipe_url | é£Ÿè­œçš„ç¶²å€ |
| Ingredient | é£Ÿè­œä¸­çš„é£Ÿæ |

#### 5.Ingredient (é£Ÿæè³‡æ–™è¡¨)
| æ¬„ä½åç¨± | èªªæ˜ |
|----------|------|
| Ingredient_Name | é£Ÿæçš„åç¨± |
| Ingredient_ID | é£Ÿæçš„ç·¨è™Ÿ |

## View

### 1. æŸ¥çœ‹ä½¿ç”¨è€…çš„æœ€æ„›é£Ÿè­œè©³ç´°è³‡è¨Š
```sql
CREATE VIEW View_User_Favorites AS
SELECT 
    u.LINE_ID,
    r.Recipe_ID,
    r.Recipe_Name,
    r.Ingredient,
    r.Instructions,
    r.Recipe_url,
    r.Recipe_photo_url,
    f.Favorite_time,
    f.Note
FROM Favorite_recipes f
JOIN User u ON f.LINE_ID = u.LINE_ID
JOIN Recipe r ON f.Recipe_ID = r.Recipe_ID;
```
### ä½¿ç”¨æ–¹å¼
```sql
SELECT *
FROM View_User_Favorites
WHERE LINE_ID = 'Ub9ec4bdf56708afd81be89b65c16034f';
```
### èªªæ˜
- æ­¤åŠŸèƒ½å¯æŸ¥è©¢ä½¿ç”¨è€…ï¼ˆä»¥ LINE_ID è­˜åˆ¥ï¼‰æ‰€æ”¶è—çš„é£Ÿè­œè³‡è¨Šï¼ŒåŒ…å«ï¼š
  - é£Ÿè­œç·¨è™Ÿèˆ‡åç¨±
  - æ‰€éœ€é£Ÿæèˆ‡æ­¥é©Ÿèªªæ˜
  - é£Ÿè­œä¾†æºé€£çµèˆ‡åœ–ç‰‡
  - æ”¶è—æ™‚é–“èˆ‡å€‹äººå‚™è¨»ç­‰
- è©³æƒ…
  - çµåˆ Userã€Favorite_recipes ä»¥åŠ Recipe ä¸‰å€‹è³‡æ–™è¡¨ï¼Œé€é JOIN å–å¾—å®Œæ•´çš„æ”¶è—ç´€éŒ„èˆ‡é£Ÿè­œå…§å®¹ï¼Œä¸¦å„²å­˜è‡³ View ä¸­ä¾›å¿«é€ŸæŸ¥è©¢ä½¿ç”¨ã€‚  
 
### åŸ·è¡Œçµæœ
![image](https://github.com/user-attachments/assets/838356e5-619f-402b-a16e-d9746e102a99)

### 2. æŸ¥çœ‹ä½¿ç”¨è€…æŒæœ‰çš„æ‰€æœ‰é£Ÿæèˆ‡æ•¸é‡
```sql
CREATE VIEW View_User_Ingredients AS
SELECT 
    u.LINE_ID,
    ui.Ingredients AS Ingredient_Name,
    ui.Quantity
FROM User u
JOIN User_Ingredients ui ON u.LINE_ID = ui.LINE_ID;
```
### ä½¿ç”¨æ–¹å¼
```sql
-- æŸ¥è©¢æŒ‡å®š LINE_ID ä½¿ç”¨è€…ç›®å‰çš„æ‰€æœ‰é£Ÿæåº«å­˜
SELECT *
FROM View_User_Ingredients
WHERE LINE_ID = 'Ub9ec4bdf56708afd81be89b65c16034f';
```
### èªªæ˜
- æ­¤åŠŸèƒ½å¯æŸ¥è©¢ä½¿ç”¨è€…ç•¶å‰æŒæœ‰çš„æ‰€æœ‰é£ŸæåŠå…¶æ•¸é‡ï¼Œæœ‰åŠ©æ–¼æ¯”å°æœ€æ„›é£Ÿè­œæ‰€éœ€é£Ÿæèˆ‡ç¾æœ‰é£Ÿæ
- è©³æƒ…
  - çµåˆ User èˆ‡ User_Ingredients è¡¨ï¼Œé€é JOIN å°‡ä½¿ç”¨è€…çš„ LINE_ID èˆ‡é£Ÿæåç¨±ã€æ•¸é‡åšçµåˆã€‚
 
### åŸ·è¡Œçµæœ
![image](https://github.com/user-attachments/assets/0f9046f5-d978-4166-9962-2f58bccd1692)


### 3. æŸ¥çœ‹æ‰€æœ‰é£Ÿè­œèˆ‡ä½¿ç”¨é£Ÿæçš„å°æ‡‰
```sql
CREATE VIEW View_Recipe_Ingredients AS
SELECT 
    Recipe_ID,
    Recipe_Name,
    Ingredient
FROM Recipe;
```
### 4. ä½¿ç”¨è€…å®Œæ•´è³‡è¨Šç¸½è¦½
```sql
CREATE VIEW View_User_Profile AS
SELECT 
    u.LINE_ID,
    u.User_State,
    u.user_dislike,
    ui.Ingredients,
    ui.Quantity
FROM User u
LEFT JOIN User_Ingredients ui ON u.LINE_ID = ui.LINE_ID;
```
### 5. é£Ÿææ¸…å–®å°ç…§
```sql
CREATE VIEW View_Ingredient_Validation AS
SELECT 
    DISTINCT ui.Ingredients AS Used_Ingredient,
    i.Ingredient_Name AS Registered_Ingredient,
    CASE 
        WHEN i.Ingredient_Name IS NOT NULL THEN 'Valid'
        ELSE 'Unregistered'
    END AS Status
FROM User_Ingredients ui
LEFT JOIN Ingredient i ON ui.Ingredients = i.Ingredient_Name;
```

## è©³ç´°èªªæ˜

### è³‡æ–™è¡¨é—œè¯èªªæ˜

#### Recipe èˆ‡ Recipe_Recommend (1..n)
- ä¸€å€‹æ¨è–¦çµæœå¯ä»¥å°æ‡‰åˆ°å¤šå€‹é£Ÿè­œ
- ä¸€å€‹é£Ÿè­œåªèƒ½å°æ‡‰åˆ°ä¸€å€‹æ¨è–¦çµæœ

#### User èˆ‡ Recipe_Recommend (1..n)
- ä¸€å€‹æ¨è–¦çµæœåªæœƒå°æ‡‰åˆ°ä¸€å€‹ä½¿ç”¨è€…
- ä¸€å€‹ä½¿ç”¨è€…å¯ä»¥æœ‰å¾ˆå¤šæ¨è–¦çµæœ

#### User_Ingredients èˆ‡ Recipe_Recommend (1..n)
- ä¸€å€‹æ¨è–¦çµæœæœƒå°æ‡‰åˆ°å¤šå€‹ä½¿ç”¨è€…é£Ÿæ
- æ¯å€‹ä½¿ç”¨è€…é£Ÿæå¿…é ˆå°æ‡‰åˆ°ä¸€å€‹æ¨è–¦çµæœ

---

## è³‡æ–™åº«Schema

### ğŸ“‹ ç›®éŒ„
- [è³‡æ–™è¡¨æ¦‚è¦½](#è³‡æ–™è¡¨æ¦‚è¦½)
- [è©³ç´°è³‡æ–™è¡¨çµæ§‹](#è©³ç´°è³‡æ–™è¡¨çµæ§‹)
  - [Recipe (é£Ÿè­œè³‡æ–™è¡¨)](#1-recipe-é£Ÿè­œè³‡æ–™è¡¨)
  - [User (ä½¿ç”¨è€…è³‡æ–™è¡¨)](#2-user-ä½¿ç”¨è€…è³‡æ–™è¡¨)
  - [User_Ingredients (ä½¿ç”¨è€…æŒæœ‰é£Ÿæè³‡æ–™è¡¨)](#3-user_ingredients-ä½¿ç”¨è€…æŒæœ‰é£Ÿæè³‡æ–™è¡¨)
  - [Recipe_recommend (é£Ÿè­œæ¨è–¦çµæœè³‡æ–™è¡¨)](#4-recipe_recommend-é£Ÿè­œæ¨è–¦çµæœè³‡æ–™è¡¨)
- [è³‡æ–™è¡¨ç¯„ä¾‹](#è³‡æ–™è¡¨ç¯„ä¾‹)

### è³‡æ–™è¡¨æ¦‚è¦½
æœ¬ç³»çµ±åŒ…å«å››å€‹ä¸»è¦è³‡æ–™è¡¨ï¼Œç”¨æ–¼ç®¡ç†é£Ÿè­œæ¨è–¦ç³»çµ±ï¼š
- Recipeï¼šå„²å­˜é£Ÿè­œåŸºæœ¬è³‡è¨Š
- Userï¼šç®¡ç†ä½¿ç”¨è€…è³‡æ–™
- User_Ingredientsï¼šè¿½è¹¤ä½¿ç”¨è€…æ“æœ‰çš„é£Ÿæ
- Recipe_recommendï¼šè¨˜éŒ„æ¨è–¦çµæœ

#### è©³ç´°è³‡æ–™è¡¨çµæ§‹

#### 1. Recipe (é£Ÿè­œè³‡æ–™è¡¨)

```sql
CREATE TABLE Recipe (
    Recipe_ID INT PRIMARY KEY AUTO_INCREMENT,
    Recipe_Name VARCHAR(100) NOT NULL,
    Ingredient TEXT NOT NULL,
    Instructions TEXT NOT NULL,
    Recipe_photo_url VARCHAR(255)
);
```

##### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| Recipe_ID | INT | é£Ÿè­œå”¯ä¸€è­˜åˆ¥ç¢¼ | ä¸»éµï¼Œè‡ªå‹•éå¢ |
| Recipe_Name | VARCHAR(100) | é£Ÿè­œåç¨± | ä¸å¯ç‚ºç©º |
| Ingredient | TEXT | æ‰€éœ€é£Ÿææ¸…å–® | ä¸å¯ç‚ºç©º |
| Instructions | TEXT | çƒ¹é£ªæ­¥é©Ÿèªªæ˜ | ä¸å¯ç‚ºç©º |
| Recipe_photo_url | VARCHAR(255) | é£Ÿè­œç…§ç‰‡URL | å¯ç‚ºç©º |

#### 2. User (ä½¿ç”¨è€…è³‡æ–™è¡¨)

```sql
CREATE TABLE User (
    User_ID INT PRIMARY KEY AUTO_INCREMENT,
    LINE_ID VARCHAR(50) NOT NULL UNIQUE,
    User_State VARCHAR(20) DEFAULT 'None',
    Change_id INT,
    User_Last_Ingredients TEXT,
    User_Last_recipes TEXT
);
```

##### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| User_ID | INT | ä½¿ç”¨è€…å”¯ä¸€è­˜åˆ¥ç¢¼ | ä¸»éµï¼Œè‡ªå‹•éå¢ |
| LINE_ID | VARCHAR(50) | LINEå¹³å°ä½¿ç”¨è€…ID | ä¸å¯é‡è¤‡ |
| User_State | VARCHAR(20) | ä½¿ç”¨è€…ç‹€æ…‹ | é è¨­å€¼ï¼š'None' |
| Change_id | INT | æ¬²æ›´æ”¹é£ŸæID | å¯ç‚ºç©º |
| User_Last_Ingredients | TEXT | ä¸Šæ¬¡è¼¸å…¥é£Ÿæ | å¯ç‚ºç©º |
| User_Last_recipes | TEXT | ä¸Šæ¬¡æ¨è–¦é£Ÿè­œ | å¯ç‚ºç©º |

#### 3. User_Ingredients (ä½¿ç”¨è€…æŒæœ‰é£Ÿæè³‡æ–™è¡¨)

```sql
CREATE TABLE User_Ingredients (
    User_Ingredients_ID INT PRIMARY KEY AUTO_INCREMENT,
    LINE_ID VARCHAR(50) NOT NULL,
    Database_Ingredients VARCHAR(100) NOT NULL,
    Quantity INT DEFAULT 1,
    FOREIGN KEY (LINE_ID) REFERENCES User(LINE_ID)
);
```

##### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| User_Ingredients_ID | INT | é£Ÿæè¨˜éŒ„è­˜åˆ¥ç¢¼ | ä¸»éµï¼Œè‡ªå‹•éå¢ |
| LINE_ID | VARCHAR(50) | ä½¿ç”¨è€…LINE ID | å¤–éµåƒç…§Userè¡¨ |
| Database_Ingredients | VARCHAR(100) | é£Ÿæåç¨± | ä¸å¯ç‚ºç©º |
| Quantity | INT | æ•¸é‡ | é è¨­å€¼ï¼š1 |

#### 4. Recipe_recommend (é£Ÿè­œæ¨è–¦çµæœè³‡æ–™è¡¨)

```sql
CREATE TABLE Recipe_recommend (
    User_ID INT NOT NULL,
    User_Ingredients_ID INT NOT NULL,
    Recipe_ID INT NOT NULL,
    PRIMARY KEY (User_ID, User_Ingredients_ID, Recipe_ID),
    FOREIGN KEY (User_ID) REFERENCES User(User_ID),
    FOREIGN KEY (User_Ingredients_ID) REFERENCES User_Ingredients(User_Ingredients_ID),
    FOREIGN KEY (Recipe_ID) REFERENCES Recipe(Recipe_ID)
);
```

##### æ¬„ä½èªªæ˜
| æ¬„ä½åç¨± | è³‡æ–™å‹æ…‹ | èªªæ˜ | å‚™è¨» |
|----------|----------|------|------|
| User_ID | INT | ä½¿ç”¨è€…ID | è¤‡åˆä¸»éµä¹‹ä¸€ |
| User_Ingredients_ID | INT | ä½¿ç”¨è€…é£ŸæID | è¤‡åˆä¸»éµä¹‹ä¸€ |
| Recipe_ID | INT | é£Ÿè­œID | è¤‡åˆä¸»éµä¹‹ä¸€ |

### è³‡æ–™è¡¨ç¯„ä¾‹

#### 1. Recipe (é£Ÿè­œè³‡æ–™è¡¨) ç¯„ä¾‹è³‡æ–™
```sql
-- æ–°å¢é£Ÿè­œç¯„ä¾‹
INSERT INTO Recipe (Recipe_Name, Ingredient, Instructions, Recipe_photo_url) VALUES
(
    'è”¥èŠ±ç‚’è›‹',
    'è”¥,é›è›‹,é¹½,èƒ¡æ¤’ç²‰',
    '1. é›è›‹æ‰“æ•£åŠ å…¥é©é‡é¹½èª¿å‘³\n2. è”¥åˆ‡æ®µ\n3. ç†±æ²¹é‹\n4. å€’å…¥è›‹æ¶²\n5. åŠ å…¥è”¥èŠ±\n6. ç¿»ç‚’å‡å‹»\n7. æœ€å¾Œæ’’ä¸Šèƒ¡æ¤’ç²‰èª¿å‘³',
    'https://example.com/recipes/egg-with-green-onion.jpg'
);
```

#### 2. User (ä½¿ç”¨è€…è³‡æ–™è¡¨) ç¯„ä¾‹è³‡æ–™
```sql
-- æ–°å¢ä½¿ç”¨è€…ç¯„ä¾‹
INSERT INTO User (LINE_ID, User_State, User_Last_Ingredients, User_Last_recipes) VALUES
(
    'Uxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx1',
    'None',
    'ç•ªèŒ„,é›è›‹',
    '1,2'
);
```

#### 3. User_Ingredients (ä½¿ç”¨è€…æŒæœ‰é£Ÿæè³‡æ–™è¡¨) ç¯„ä¾‹è³‡æ–™
```sql
-- æ–°å¢ä½¿ç”¨è€…é£Ÿæç¯„ä¾‹
INSERT INTO User_Ingredients (LINE_ID, Database_Ingredients, Quantity) VALUES
(
    'Uxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx1',
    'ç•ªèŒ„',
    2
);
```
### è³‡æ–™ä¾†æº
- é£Ÿè­œè³‡æ–™ä¾†æº(æˆ‘å€‘æœ‰ç¶“éåŒæ„ä½¿ç”¨æ­¤ç¶²ç«™çš„é£Ÿè­œè³‡æ–™):[https://icook.tw/](https://icook.tw/)
- ![è¨±å¯åœ–ç‰‡](https://github.com/user-attachments/assets/05c4b26c-286f-44d9-a19b-cd9603e94158)





